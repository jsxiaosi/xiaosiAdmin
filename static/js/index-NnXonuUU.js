import{s as B,G as E,n as g,p as k,d as U,u as $,a as b,o as D,c as I,g as w,h as l,f as m,w as p,bS as A}from"./index-BpFkXeN0.js";import{_ as R}from"./plugin-vueexport-helper-DlAUqK2U.js";const T=`
display: inline-block;
overflow: hidden;
position: absolute;
left: 0;
top: 0;
width: 100%;
height: 100%;
pointer-events: none;
background-repeat: repeat;
z-index: 1000;
`,z=Symbol("watermark-dom");function M(t,r){const{width:a,height:f,rotate:i,fontSize:u,fillStyle:d,textAlign:n}={},o=document.createElement("canvas");o.width=a||240,o.height=f||100;const s=o.getContext("2d");return s&&t&&(s.rotate(i||-20*Math.PI/180),s.font=u||"14px normal",s.fillStyle=d||"rgba(180, 180, 180, 0.3)",s.textAlign=n||"left",s.textBaseline="middle",s.fillText(t,o.width/20,o.height/1.5)),o.toDataURL("image/png")}function V(){const t=document.createElement("div");return t.id=z.toString(),t.className="water-mark",t.setAttribute("style",`${T}`),t}function O(t,r){const a=V();a.style.background=`url(${M(r)}) left top repeat`,t&&(t.style.position||(t.style.position="relative"),t.appendChild(a))}const q={mounted(t,r,a){O(t,r.value)},updated(t,r,a,f){const{oldValue:i,value:u}=r;if(i!==u){const d=t.querySelector(".water-mark");d&&(d.style.background=`url(${M(u)}) left top repeat`)}}},C=(t=g(document.body),r)=>{const a=B(),f=n=>{const o=k(a);o&&(o.style.background=`url(${M(n)}) left top repeat`)},i=n=>{if(k(a)){f(n);return}const o=V();a.value=o;const s=k(t);s&&(f(n),s.style.position="relative",s.appendChild(o))},u=n=>{i(n)},d=()=>{const n=k(t);if(!n)return;const o=k(a);o&&(a.value=void 0,n.removeChild(o))};return E(()=>{d()}),{setWaterMark:u,close:d}},G={class:"config"},L={class:"config"},P={ref:"hooks-deom",class:"region"},j={class:"config"},F={class:"region"},H=U({__name:"index",setup(t){const r=q,{setWaterMark:a,close:f}=C(),i=g("vue-xs-admin"),u=()=>{a(i.value)},d=()=>{f()},n=g("vue-xs-admin"),o=g(n.value),s=()=>{o.value=n.value},h=$("hooks-deom"),{setWaterMark:N,close:S}=C(h),x=g("这是一个水印"),W=()=>{N(x.value)},_=()=>{S()};return(J,e)=>{const c=b("el-button"),y=b("ElInput");return D(),I("div",null,[w("div",G,[e[6]||(e[6]=l(" 修改水印名称： ")),m(y,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=v=>i.value=v),style:{width:"200px"}},{append:p(()=>[m(c,{onClick:u},{default:p(()=>e[4]||(e[4]=[l(" 确定 ")])),_:1})]),_:1},8,["modelValue"]),e[7]||(e[7]=l(" （全局） ")),m(c,{onClick:d},{default:p(()=>e[5]||(e[5]=[l(" 清除 ")])),_:1})]),w("div",L,[e[10]||(e[10]=l(" 修改水印名称： ")),m(y,{modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=v=>x.value=v),style:{width:"200px"}},{append:p(()=>[m(c,{onClick:e[1]||(e[1]=v=>W())},{default:p(()=>e[8]||(e[8]=[l(" 确定 ")])),_:1})]),_:1},8,["modelValue"]),e[11]||(e[11]=l(" （hooks） ")),m(c,{onClick:_},{default:p(()=>e[9]||(e[9]=[l(" 清除 ")])),_:1})]),w("div",P,null,512),w("div",j,[e[13]||(e[13]=l(" 修改水印名称： ")),m(y,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=v=>n.value=v),style:{width:"200px"}},{append:p(()=>[m(c,{onClick:s},{default:p(()=>e[12]||(e[12]=[l(" 确定 ")])),_:1})]),_:1},8,["modelValue"]),e[14]||(e[14]=l(" （指令） "))]),A(w("div",F,null,512),[[k(r),o.value]])])}}}),X=R(H,[["__scopeId","data-v-0b27f2df"]]);export{X as default};
